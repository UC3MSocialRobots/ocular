<launch>
  <arg name="fixed_frame" value="openni_depth_frame" />

  <arg name="debug" value="False" />
  <arg name="launch_prefix" value="xterm -e gdb --args" />
	
  <param name="robot_description" command="$(find xacro)/xacro.py '$(find pi_tracker)/urdf/pi_robot.urdf.xacro'" />
  <param name="/use_sim_time" value="False" />
 
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher">
    <param name="publish_frequency" value="20.0"/>
  </node>
    
  <include file="$(find openni_camera)/launch/kinect_frames.launch" />

  <group if="$(arg debug)">
    <node launch-prefix="$(arg launch_prefix)" name="skeleton_tracker" pkg="pi_tracker" type="skeleton_tracker">
      <param name="load_filepath" value="$(find pi_tracker)/params/SamplesConfig.xml" />
      <rosparam command="load" file="$(find pi_tracker)/params/tracker_params.yaml" />
      <param name="fixed_frame" value="($arg fixed_frame)" />
    </node>
  </group>
  <group unless="$(arg debug)">
    <node name="skeleton_tracker" pkg="pi_tracker" type="skeleton_tracker">
      <param name="load_filepath" value="$(find pi_tracker)/params/SamplesConfig.xml" />
      <rosparam command="load" file="$(find pi_tracker)/params/tracker_params.yaml" />
      <param name="fixed_frame" value="($arg fixed_frame)" />
    </node>
  </group>

  <node pkg="tf" type="static_transform_publisher" name="base_world_broadcaster" args="0 0 0 0 0 0 /base_link /world 100" />
</launch>
